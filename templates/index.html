<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>íš¨ë„ ë¹„ë””ì˜¤</title>
    <style>
      /* ê¸°ì¡´ CSS ê·¸ëŒ€ë¡œ ìœ ì§€ */
      body {
        background: #1a1a1a;
        color: white;
        font-family: sans-serif;
        padding: 20px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
      }
      .video-card {
        background: #333;
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        border: 1px solid #444;
      }
      .title {
        font-weight: bold;
        margin-top: 10px;
      }
      /* í”Œë ˆì´ì–´ ìŠ¤íƒ€ì¼ ìƒëµ (ê¸°ì¡´ê³¼ ë™ì¼) */
    </style>
  </head>
  <body>
    <h1>ğŸ“º í• ë¨¸ë‹ˆ ë™ì˜ìƒ ëª©ë¡</h1>

    <!-- ê²½ê³  ë©”ì‹œì§€ê°€ ìˆì„ ë•Œë§Œ í‘œì‹œ -->
    {% if warnings %}
    <div style="background: gold; color: black; padding: 10px; margin-bottom: 20px">
      âš ï¸ ì¬ìƒ ë¶ˆê°€ëŠ¥í•œ íŒŒì¼: {{ warnings|join(', ') }}
    </div>
    {% endif %}

    <div class="grid">
      <!-- Jinja2 ë°˜ë³µë¬¸ ì‹œì‘ -->
      {% for video in videos %}
      <div class="video-card" onclick="playVideo('{{ video.path }}', '{{ video.name }}')">
        <div style="font-size: 30px">â–¶</div>
        <div class="title">{{ video.name }}</div>
      </div>
      {% else %}
      <p>ë™ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
      <!-- ë°˜ë³µë¬¸ ë -->
    </div>

    <!-- ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ (ìˆ¨ê¹€ ìƒíƒœ) -->
    <div
      id="player-overlay"
      style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black"
    >
      <button onclick="closePlayer()" style="position: absolute; top: 20px; right: 20px; font-size: 20px; z-index: 100">
        ë‹«ê¸° X
      </button>
      <video id="video-player" controls style="width: 100%; height: 100%"></video>
    </div>

    <script>
      function playVideo(path, name) {
        // Jinjaê°€ ë Œë”ë§í•œ ê²½ë¡œëŠ” ì´ë¯¸ ì¸ì½”ë”© ë˜ì–´ ìˆë‹¤ê³  ê°€ì •í•˜ê±°ë‚˜ ì—¬ê¸°ì„œ ì²˜ë¦¬
        var player = document.getElementById("video-player");
        player.src = "/stream/" + path;
        document.getElementById("player-overlay").style.display = "block";
        player.play();
      }
      function closePlayer() {
        var player = document.getElementById("video-player");
        player.pause();
        player.src = "";
        document.getElementById("player-overlay").style.display = "none";
      }
    </script>
  </body>
</html>
